@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@using Fr.EQL.AI109.Tontapat.Model

@model PrestationDetail

@{
    string InstallationString = null;
    if (Model.TypeInstallationFinal == true)
    {
        InstallationString = "votre charge";
    }
    else
    {
        InstallationString = "la charge de l'éleveur";
    }
}


<h1>Prestation #@Model.DateValidation.ToString("yyMMdd")-@Model.Id</h1>

<div class="box-offre-details-header">
    <div>
        <img class="img-offre-thumbnail-profil" src="~/img/photos/profile/@(Model.IdEleveur).png" />
        Réalisée par <a asp-controller="Utilisateur" asp-action="Details" asp-route-id="@Model.Id">@Model.PrenomEleveur</a>
    </div>
    <div class="box-boutons">
        <button class="btn-primary" type="reset" form="offre" value="negociate">Négocier</button>
        <button class="btn-danger" type="submit" form="offre" value="cancel">Annuler la prestation</button>
    </div>
</div>

<div class="box-offre-details">

    <div class="offre-details-main">
        <div class="box-offre">
            <div class="info-offre">
                <h3>Caractéristiques de l'offre</h3>

                <table class="offre-features">
                    <tr>
                        <td>
                            <i class="fas fa-location-arrow"></i>
                        </td>
                        <td>
                            @Model.NomTerrain, Ville
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <img class="icon-list" src="~/img/icons/espece/@(Model.IdEspeceTroupeau).png" />
                        </td>
                        <td>
                            @Model.NomRaceTroupeau
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <i class="fas fa-calendar-alt"></i>
                        </td>
                        <td>
                            Du @Model.DateDebut.ToString("dd/MM/yy") au @Model.DateFin.ToString("dd/MM/yy")
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <i class="fas fa-tachometer-alt"></i>
                        </td>
                        <td>
                            Type de tonte : @Model.NomTypeTonte
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <img class="icon-list" src="~/img/icons/install.png" />
                        </td>
                        <td>
                            Installation à la charge @InstallationString
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <i class="fas fa-binoculars"></i>
                        </td>
                        <td>
                            Fréquence d'intervention : tous les ???????????????? jours
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <i class="fa fa-times fa-lg"></i>
                        </td>
                        <td>
                            Conditions d'annulation : ???????????
                            <i class="far fa-question-circle" title="Annulation gratuite jusqu’à XX jours avant la prestation, facturation de la prestation à hauteur de XX% au-delà."></i>
                        </td>
                    </tr>

                </table>
            </div>
        </div>
    </div>

    <div class="offre-details-tarif">
        <div class="box-offre">
            <div class="info-offre tarif">
                <h3>Tarification</h3>
                <table class="tarif">
                    <tr>
                        <td>
                            Installation
                        </td>
                        <td class="prix">
                            -€
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Frais de bétail
                        </td>
                        <td class="prix">
                            -€
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Interventions
                        </td>
                        <td class="prix">
                            -€
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Frais de service
                        </td>
                        <td class="prix">
                            -€
                        </td>
                    </tr>
                    <tr>
                        <td>
                            TVA (20%)
                        </td>
                        <td class="prix">
                            -€
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h4>Total</h4>
                        </td>
                        </td>
                        <td class="prix">
                            <h4>@Model.PrixConvenu€</h4>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

</div>
<div class="box-offre">
    <div class="info-offre">
        <h3>Historique</h3>
        <table>
            <tr>
                <td>
                    <i class="fas fa-arrow-up"></i>
                </td>
                <td>Demande envoyée le @Model.DateDemande.ToString("dd/MM/yy") à partir de l'offre <a asp-controller="Offre" asp-action="Details" asp-route-id="">Offre</a> de <a asp-controller="Utilisateur" asp-action="Details" asp-route-id="@Model.Id">@Model.PrenomEleveur</a></td>
            </tr>
            @if (Model.DateValidation > Model.DateDemande)
            {
                <tr>
                    <td>
                        <i class="fas fa-check"></i>
                    </td>
                    <td>Demande acceptée par <a asp-controller="Utilisateur" asp-action="Details" asp-route-id="@Model.Id">@Model.PrenomEleveur</a> le @Model.DateValidation.ToString("dd/MM/yy")</td>
                </tr>
            }
            else if (Model.DateRefus > Model.DateDemande)
            {
                <tr>
                    <td>
                        <i class="fas fa-times fa-lg"></i>
                    </td>
                    <td>Demande refusée par <a asp-controller="Utilisateur" asp-action="Details" asp-route-id="@Model.Id">@Model.PrenomEleveur</a> le @Model.DateRefus.ToString("dd/MM/yy") (Motif: @Model.DescriptionRefus)</td>
                </tr>
            }
            <tr>
                <td>
                    <i class="fas fa-comment-dollar"></i>
                </td>
                <td>
                    Négociation ouverte le xx/xx/xx
                </td>
            <tr>
                <td></td>
                <td>
                    <ul>
                        <li><i class="far fa-file-alt"></i> Proposition faite par <strong>vous</strong> le xx/xx/xx</li>
                        <li><i class="far fa-file-alt"></i> Proposition faite par <a asp-controller="Utilisateur" asp-action="Details" asp-route-id="@Model.Id">@Model.PrenomEleveur</a> le xx/xx/xx</li>
                        <li><i class="far fa-file-alt"></i> <strong>Contre-proposition</strong> envoyée par <strong>vous</strong> le xx/xx/xx</li>
                        <li><i class="far fa-file-alt"></i> <strong>Contre-proposition</strong> envoyée par <a asp-controller="Utilisateur" asp-action="Details" asp-route-id="@Model.Id">@Model.PrenomEleveur</a> le xx/xx/xx</li>
                        <li><i class="far fa-file-alt"></i> Vous avez <strong>accepté</strong> la contre-proposition de <a asp-controller="Utilisateur" asp-action="Details" asp-route-id="@Model.Id">@Model.PrenomEleveur</a> le xx/xx/xx</li>
                        <li><i class="fas fa-handshake"></i> <a asp-controller="Utilisateur" asp-action="Details" asp-route-id="@Model.Id">@Model.PrenomEleveur</a> a <strong>accepté</strong> votre contre-proposition le xx/xx/xx</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>
                    <i class="fas fa-hourglass-start"></i>
                </td>
                <td>
                    La prestation a <strong>commencé</strong> le @Model.DateDebut
                </td>
            <tr>
                <td></td>
                <td>
                    <ul>
                        <li>
                            <strong>Intervention programmée</strong> de <a asp-controller="Utilisateur" asp-action="Details" asp-route-id="@Model.Id">@Model.PrenomEleveur</a> le xx/xx/xx
                        </li>
                        <li>
                            <strong>Intervention demandée</strong> par <strong>vous</strong> le xx/xx/xx
                        </li>
                        <li>
                            Demande d'intervention <strong>acceptée</strong> par <a asp-controller="Utilisateur" asp-action="Details" asp-route-id="@Model.Id">@Model.PrenomEleveur</a> le xx/xx/xx
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>
                    <i class="fas fa-hourglass-end"></i>
                </td>
                <td>
                    La prestation s'est <strong>terminée</strong> le @Model.DateFin
                </td>
            </tr>
        </table>
    </div>
</div>

<div class="box-boutons">
    <button class="btn-primary" type="reset" form="offre" value="negociate">Négocier</button>
    <button class="btn-danger" type="submit" form="offre" value="cancel">Annuler la prestation</button>
</div>
